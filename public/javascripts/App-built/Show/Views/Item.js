define("text!Show/Templates/Item.html",[],function(){return'<ul class="breadcrumb">\r\n  <li><a href="#shows">Shows</a> <span class="divider">/</span></li>\r\n  <li class="active"><%=title%></li>\r\n</ul>\r\n<% if(lock) {%>\r\n<div class="lock pull-right btn btn-danger">LOCKED</div>\r\n<% } %>\r\n<div class="title">\r\n    <h1 class="field"><%=title%></h1>\r\n    <input class="edit" type="text" name="title" value="<%=title%>" placeholder="Title"/>\r\n</div>\r\n<div>\r\n    <p class="field"><%=description%></p>\r\n    <input class="edit" type="text" name="description" value="<%=description%>" placeholder="Description"/>\r\n</div>\r\n<div class="edit form-actions">\r\n    <button class="save btn btn-primary" type="submit">Save</button>\r\n    <button class="cancel btn" type="button">cancel</button>\r\n</div>\r\n\r\n\r\n'}),define("Show/Views/Item",["backbone","underscore","text!Show/Templates/Item.html"],function(e,t,n){return e.View.extend({className:"show-view",template:t.template(n),events:{"dblclick .field":"edit","click button.save":"save","click button.cancel":"edit"},initialize:function(e){e||(e={}),this.model=e.model,this.collection=e.collection||this.model.collection,this.model&&(this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"remove",this.root)),this.initializeLock()},initializeLock:function(){var e=this;this.model&&this.listenTo(this,"remove",function(){this.model.unlock(),$(window).off("unload")}),$(window).on("unload",function(){e.model.unlock({async:!1}),$(window).off("unload")})},remove:function(){this.trigger("remove"),e.View.prototype.remove.call(this)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.model.isNew()&&this.$el.addClass("editing"),this},root:function(){window.location.hash="shows"},edit:function(){this.model.isNew()&&this.root();if(!this.$el.hasClass("editing")&&this.model.get("lock")===!0)return!1;this.$el.hasClass("editing")?(this.$el.removeClass("editing"),this.model.unlock()):(this.$el.addClass("editing"),this.model.lock())},save:function(e){e.stopPropagation(),e.preventDefault(),this.model.set({title:this.$el.find("input[name=title]").val(),description:this.$el.find("input[name=description]").val(),lock:!1}),this.edit(),this.model.isNew()?this.collection.create(this.model,{wait:!0}):this.model.save()}})});